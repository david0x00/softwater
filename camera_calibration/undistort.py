import cv2
import numpy as np

# mtx = 
#[[1.53510668e+03 0.00000000e+00 9.54393136e+02]
# [0.00000000e+00 1.53080529e+03 5.43030187e+02]
# [0.00000000e+00 0.00000000e+00 1.00000000e+00]]

# newcameramtx = 
#[[1.55989050e+03 0.00000000e+00 9.42619458e+02]
# [0.00000000e+00 1.54498389e+03 5.43694259e+02]
# [0.00000000e+00 0.00000000e+00 1.00000000e+00]]

# dist = 
#[[ 0.19210016 -0.4423498   0.00093771 -0.00542759  0.25832642]]

#roi = (4, 11, 1907, 1059)

#ret = 0.8771391257734008

mtx = np.array([
    [1535.10668, 0, 954.393136],
    [0, 1530.80529, 543.030187],
    [0,0,1]
])

newcameramtx = np.array([
    [1559.8905, 0, 942.619458],
    [0, 1544.98389, 543.694259],
    [0,0,1]
])

dist = np.array([[0.19210016, -0.4423498, 0.00093771, -0.00542759, 0.25832642 ]])

roi = (4, 11, 1907, 1059)

img = cv2.imread("chessboard_images/48d.jpg")
dst = cv2.undistort(img, mtx, dist, None, newcameramtx)

x, y, w, h = roi
dst = dst[y:y+h, x:x+w]
cv2.imwrite('undistorted_img.jpg', dst)